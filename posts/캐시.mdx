---
title: "캐시"
description: "브라우저 캐시"
date: 2023-08-05
tags:
  - 캐시
  - 스토리지
---

# 정의

컴퓨팅에서 캐시는 일반적으로 일시적인 특징이 있는 데이터 하위 집합을 저장하는 고속 데이터 스토리지 계층이다.

따라서 이후에 해당 데이터에 대한 요청이 있을 경우 데이터의 기본 스토리지 위치에 액세스할 때보다 더 빠르게 요청을 처리할 수 있다.

**_캐싱을 사용하면 이전에 검색하거나 계산한 데이터를 효율적으로 재사용할 수 있다._**

## 작동방식

캐시의 데이터는 일반적으로 RAM과 같이 빠르게 액세스할 수 있는 하드웨어에 저장되며, 소프트웨어 구성 요소와 함께 사용될 수도 있다.

## 목적

더 느린 기본 스토리지 계층에 액세스해야 하는 필요를 줄임으로써 데이터 검색 성능을 높이는 것이다.

## 모범 사례

> “**캐시 계층을 구현할 때는 캐싱되는 데이터의 유효성을 이해하는것이 중요하다.**”

성공적인 캐시는 높은 적중률로 이어진다. 즉, 가져온 데이터가 캐시에 존재한다. 가져온 데이터가 캐시에 존재하지 않을 때 캐시 비적중이 발생한다.

## 이점

**_애플리케이션 성능 개선_**

---

메모리 디스크 (마그네틱 또는 SSD)보다 훨씬 속도가 빠르기 때문에 인 메모리 캐시에서 데이터를 읽는 속도가 매우 빠르다. 이에 따라 전반적인 성능을 개선한다.

**_데이터베이스 비용 절감_**

---

단일 캐시 인스턴스는 수십만 IQPS(초당 입출력 작업)를 제공할 수 있으며, 따라서 수많은 데이터베이스 인스턴스를 대체할 수 있기 때문에 총 비용이 절감된다.

이 같은 비용 절감 이점은 기본 데이터베이스에서 처리량당 요금이 부과되는 경우 특히 크다.

**_백엔드의 로드 감소_**

---

캐싱은 읽기 로드의 상당 부분을 백엔드 데이터베이스에서 인 메모리 계층으로 리디렉션함으로써 데이터베이스의 로드를 줄이고 로드 시에 성능이 저하되거나 작업 급증 시에 작동이 중단되지 않도록 보호할 수 있다.

**_예측 가능한 성능_**

---

모던 애플리케이션의 일반적인 과제 중 하나는 애플레케이션 사용량이 급증하는 시기에 대응하는 것이다.

데이터 베이스에 대한 로드가 증가하면 데이터를 가져오는 데 있어 지연 시간이 길어지고 전반적인 애플리케이션 성능이 예측 불가능해진다. 높은 처리량의 인 메모리 캐시를 활용함으로써 문제를 해결할 수 있다.

**_데이터베이스 핫스팟 제거_**

---

인 메모리 캐시에 핫스팟 공통 키를 저장하면 가장 자주 액세스하는 데이터에 대해 예측 가능한 빠른 성능을 제공하는 동시에 초과 프로비저닝의 필요성을 줄일 수 있다.

**_읽기 처리량(IOPS) 증가_**

---

인 메모리 시스템은 지연 시간을 줄일 뿐만 아니라 유사 디스크 기반 데이터베이스에 비해 훨씬 높은 요청 속도를 제공한다.

분산형 사이드 캐시로 사용되는 단일 인스턴스는 초당 수십만 건의 요청을 처리할 수 있다.

## 캐싱 사용 사례

**_데이터베이스 캐싱_**

---

오늘날 많은 데이터베이스가 비교적 우수한 성능을 제공하지만, 애플리케이션에 더 높은 성능이 요구되는 사용 사례도 많다. 데이터베이스 캐싱을 사용하면 처리량을 크게 높이고 백엔드 데이터베이스와 관련한 데이터 검색 지연 시간을 줄일 수 있으므로 애플리케이션의 전반적인 성능이 향상된다.

캐시는 성능을 높이기 위해 애플리케이션에 사용할 수 있는 데이터베이스에 인접한 데이터 액세스 계층 역할을 한다.

**_CDN_**

---

웹 트래픽이 지리적으로 분산되어 있는 경우, CDN은 글로벌 엣지 로케이션 네트워크를 활용하여 동영상, 웹 페이지, 이미지 등 웹 콘텐츠의 캐싱된 복사본을 고객에게 제공하는 기능을 제공한다.

응답 시간을 줄이기 위해 CDN은 고객과 가장 가까운 엣지 로케이션 또는 원래 요청 위치를 활용함으로써 응답 시간을 단축한다.

웹 자산이 캐시에서 제공되므로 처리량이 대폭 늘어난다.

동적 데이터의 경우 많은 수의 CDN을 구성하며 오리진 서버에서 데이터를 검색할 수 있다.

**_DNS 캐싱_**

---

인터넷의 모든 도메인 요청에서는 도메인 이름과 연결된 IP 주소를 확인하기 위해 DNS 캐시 서버를 쿼리한다.

DNS 캐싱은 OS를 비롯한 여러 수준에서 ISP 및 DNS 서버를 통해 실행될 수 있다.

**_세션 관리_**

---

HTTP 세션에는 로그인 정보, 쇼핑 카트 목록, 이전에 본 항목 등, 사이트 사용자와 웹 어플리케이션 간에 교환된 사용자 데이터가 포함된다.

중앙 집중식 세션 관리 데이터 스토어를 활용하는 것이 모든 웹 서버에서 일관된 사용자 환경을 제공하고, 탄력적인 웹 서버 플릿에서 더 나은 세션 내구성을 제공하며, 세션 데이터가 여러 캐시에 복제되는 경우에 더 높은 가용성을 제공하는 등 여러 가지 이유로 모던 애플리케이션 아키텍처에 이상적인 솔루션이라고 할 수 있다.

**_API_**

---

> _“API가 비지니스 로직을 인스턴스화하고 모든 요청에서 데이터베이스로 백엔드 요청을 보내야 하는 것은 아니다.”_

경우에 따라서 API의 캐싱된 결과를 제공하는 것이 비용 효율적인 최적의 응답 방식이 될 수 있다. 기반 데이터의 변경 속도에 맞춰 API 응답을 캐싱할 수 있는 경우 특히 그렇다.

API 응답을 캐싱함으로써 애플리케이션 서버 및 데이터베이스를 비롯한 인프라에 가해지는 부담을 줄일 수 잇다. 또한 응답 시간이 빨라져 더 높은 성능의 API를 제공할 수 있다.

**_하이브리드 환경의 캐싱_**

---

하이브리드 클라우드 환경에는 클라우드에 상주하면서 온프레미스 데이터베이스에 자주 액세스해야 하는 애플리케이션이 있을 수 있다. VPN 및 Direct Connect를 비롯하여, 클라우드와 온프레키스 환경 간의 연결을 구현하기 위해 사용할 수 있는 다양한 네트워크 토폴로지가 있다. 또한 VPN 및 온프레미스 데이터 센터까지의 지연 시간이 짧더라도, 전체 데이터 검색 성능을 가속화하기 위해 클라우드 환경에서 온프레미스 데이터를 캐싱하는 것이 가장 바람직할 수도 있다.

**_웹 캐싱_**

---

최종 사용자에게 웹 콘텐츠를 제공할 때, 아티팩트를 캐싱하여 디스크 읽기와 서버 로드를 배제하면 이미지, html 동영상 등의 웹 자산 검색과 관련된 대부분의 지연 시간을 크게 줄일 수 있다.

서버와 클라이언트 양쪽 모두에게 다양한 웹 캐싱 기술을 활용할 수 있다.

서버 측 웹 캐싱은 일반적으로 프런트에 위치한 웹 서버의 웹 응답을 보존하는 웹 프록시를 활용해 로드 및 대기 시간을 효과적으로 줄인다.

클라이언트 측 웹 캐싱에는 이전에 방문한 웹 콘텐츠의 캐싱된 버전을 유지하는 브라우저 기반 캐싱이 포함될 수 있다.

**_일반 캐시_**

---

메모리에서 데이터에 엑세스하면 디스크나 SSD에서 데이터에 엑세스하는 것보다 훨씬 빠르기 때문에 캐시의 데이터를 활용하면 많은 이점이 있다.

트랜잭션 데이터 지원이나 디스크 기반의 내구성이 필요하지 않은 여러 사용 사례에서 인 메모리 키-값 스토어를 독립 실행형 데이터베이스로 사용하는 방법은 고성능 애플리케이션을 구축하는 데 효과적이다.

애플리케이션 속도는 물론, 경제적인 가격으로 제공되는 높은 처리량을 통해 이점을 얻을 수 있다.

사례 - 제품 그룹, 범주 목록, 프로파일 정보 등

**_통합 캐시_**

---

통합 캐시는 오리진 데이터베이스에서 자주 액세스하는 데이터를 자동으로 캐싱하는 인 메모리 계층이다.

가장 일반적으로, 기반 데이터베이스는 데이터가 캐시에 상주하는 경우 캐시를 사용하며 인바운드 데이터베이스 요청에 대한 응답을 제공한다.

이 경우 요청 지연 시간이 단축되고 데이터베이스 엔진의 CPU 및 메모리 사용률이 감소하여 데이터베이스의 성능이 크게 향상된다.

통합 캐시의 중요한 특성 중 하나는 캐싱된 데이터가 데이터베이스 엔진이 디스크에 저장한 데이터와 일치한다는 것이다.

---

속도를 위해 용량을 절충하는 캐시는 일반적으로 데이터의 하위 집합을 일시적으로 저장한다.

보통 완전하고 영구적인 데이터가 있는 데이터베이스와는 대조적이다.

## 용어

### 데이터 스토리지

데이터를 보존하고 필요에 따라 액세스할 수 있도록 개발된 기술을 사용하여 정보를 보존하는 것.

데이터 스토리지는 기록 매체를 사용하여 컴퓨터나 기타 장치로 데이트러를 보존하는 것을 의미한다.

**종류**

---

1. 파일 스토리지
   1. 데이터가 파일 및 폴더에 저장된다.
   2. 하드 드라이브에서 사용.
   3. 하드 드라이브의 관점에서 보는 파일과 사용자의 관점에서 보는 파일이 동일.
2. 개체 스토리지
   1. 데이터가 메타데이터 및 고유 식별자와 함께 개체로 저장.
   2. 경제적
   3. 편집이 필요하지 않은 데이터에만 적합.
3. 블록 스토리지
   1. 데이터가 균일한 크기의 블록에 저장됨.
   2. 상대적으로 비싸고 복잡하다. 확장성이 떨어진다.
   3. 액세스와 편집이 자주 수행되는 데이터에 적합.

---

### 캐시 비적중

캐시 메모리에서 요구하는 데이터나 명령어를 찾지 못한 상태.

이런 상황이 발생하면 시스템은 원래의 저장공간에서 데이터를 찾아야 하며, 이로 인해 추가적인 시간이 소요된다. 이는 시스템의 성능을 저하시키는 원인이 될 수 있다.

### 알고리즘

LRU (Least Recently Used) - 최근 사용된 데이터 가장 먼저 제거

OPT (Optimal) - 미래에 가장 오랫동안 사용되지 않을 것으로 예상되는 데이터 제거.

이러한 알고리즘들은 캐시 메모리의 효율적인 관리를 돕지만, 항상 정확한 예측이 불가능하므로 캐시 미스가 발생된다.

### 인 메모리 계층 (In-Memory Tier)

데이터를 저장, 조회, 처리하는 구조에서 데이터를 메인 메모리에 저장하는 계층을 의미한다.

이 계층은 일반적으로 디스크 기반의 저장 계층보다 빠른 읽기 / 쓰기 성능을 제공하기 때문에 빠른 데이터 액세스를 필요로 하는 애플리케이션에 유리하다.

빠른 데이터 처리가 필요한 고성능 애플리케이션, 실시간 분석, 온라인 트랜잭션 처리, 실시간 추천 시스템 등에 주로 사용된다.

그러나 메모리는 디스크에 비해 비용이 높고, 전원 공급이 중단되면 데이터가 손실될 수 있다는 단점이 있다. 따라서, 이러한 시스템에서는 데이터의 지속성을 보장하기 위한 별도의 메커니즘이 필요하다.

**_구성_**

---

1. 인 메모리 데이터베이스
   - 전체 데이터베이스를 메인 메모리에 저장하여 빠른 데이터 액세스를 제공하는 데이터베이스.
2. 캐시
   - 가장 자주 접근하는 데이터 또는 최근에 접근한 데이터를 메인 메모리에 임시로 저장하여 데이터 액세스 시간을 줄이는 저장소
3. 인 메모리 데이터 그리드
   - 데이터를 메모리에 분산 저장하고, 높은 가용성과 빠른 데이터 액세스를 제공하는 시스템.

---

---
